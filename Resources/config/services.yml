imports:
    - { resource: factories.yml }
    - { resource: forms.yml }
    - { resource: menus.yml }

services:
    # Events subscribers
    lag.admin.template_subscriber:
        class: LAG\AdminBundle\Event\Subscriber\TemplateSubscriber
        tags:
            - {name: kernel.event_subscriber}
        arguments:
            - '@twig'
            - '@lag.admin.configuration_factory'

    lag.admin.extra_configuration_subscriber:
        class: LAG\AdminBundle\Event\Subscriber\ExtraConfigurationSubscriber
        tags:
            - {name: kernel.event_subscriber}
        arguments:
            - '%lag.enable_extra_configuration%'
            - '@doctrine'
            - '@lag.admin.configuration_factory'

    lag.admin.admin_subscriber:
        class: LAG\AdminBundle\Event\Subscriber\AdminSubscriber
        tags:
            - {name: kernel.event_subscriber}
        arguments:
            - '@lag.admin.factory'

    # Routing loader
    lag.admin.routing:
        class: LAG\AdminBundle\Routing\RoutingLoader
        tags:
            - { name: routing.loader }
        arguments:
            - '@lag.admin.factory'
            - '@lag.admin.registry'

    # Twig extension
    lag.admin.twig:
        class: LAG\AdminBundle\Twig\AdminExtension
        tags:
            - {name: twig.extension}
        arguments:
            - '@router'
            - '@translator'
            - '@lag.admin.configuration_factory'
            - '@twig'

    # Message handlers
    lag.admin.message_handler:
        class: LAG\AdminBundle\Message\MessageHandler
        arguments:
            - '@logger'
            - '@session'
            - '@translator'

    # Request handler
    lag.admin.request_handler:
        class: LAG\AdminBundle\Admin\Request\RequestHandler
        arguments:
            - '@lag.admin.registry'

    lag.admin.registry:
        class: LAG\AdminBundle\Admin\Registry\Registry

    # Form
    lag.admin.form.factory:
        class: LAG\AdminBundle\Form\Factory\FormFactory
        arguments:
            - '@form.factory'
